# StreamCount

**This Repositiory contains different main python file and supporting files to calculate the max number of concurrent videos that are playing .**

**MessageGenerator.py**
  This files generates a finite protobuf messages that can be used to calcualte the business requirement.

   i.e max concurrent videos playing in the platform

   Based on the requirement , it is a protobuf message format so utilized bunch of protobuf repeated message generating techniques.


**VideoPlay.proto**

This is the schema file for protobuf message .Using this schema messages will be generated by above python file


**VideoPlay_pb2.py**

This is a complied code that helps to read/write messages in protobuf format  . Below is the command to generate this *_pb2.py file.

`protoc -I=$SRC_DIR --go_out=$DST_DIR $SRC_DIR/VideoPlay.proto`


***SRC_DIR** indicates the directory where the protobuf schema is available

***DST_DIR** indicates the target directory where the generated pb2 file should be stored.In this code ,i placed it in same project directory

To run this command in terminal make sure you have protoc compiler in local machine.protoc comes with protobuf.

     brew install protobuf

   
**StreamCounter.py**

This file contains  the logic to count the max number of concurrent videos playing .

Assumptions/Considerations:
1. Assumed the format of start and end times as 'yyyy-mm-dd HH:MM:SS'
2. Generated messages for one day only,but the logic can handle videos that played across the days.
3. There are multiple ways of having the schema like using maps ,but i used the standard repeated datatype 


**To run this project**:

Install the requirements mentioned in requirements.txt

No need to generate the pb2 file again.but it is flexible ,can be generated  multiple times 

Once all the requirements are installed just run the below command (if using terminal) .I tested this via pycharm ide.

`python StreamCounter.py`


**pytests**

I will be demonstrating, how i will write pytests during  our discussion.



